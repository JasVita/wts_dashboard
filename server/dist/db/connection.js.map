{"version":3,"file":"connection.js","sourceRoot":"","sources":["../../db/connection.ts"],"names":[],"mappings":"AAAA,OAAO,GAAG,MAAM,IAAI,CAAC;AACrB,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,MAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC;AAErB,MAAM,QAAQ,GAAG;IACf,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,IAAI,WAAW;IACxC,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI;IACzC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,IAAI,UAAU;IAC3C,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,IAAI,UAAU;IACvC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE;IACvC,GAAG,EAAE;QACH,OAAO,EAAE,IAAI;QACb,kBAAkB,EAAE,KAAK;KAC1B;CACF,CAAC;AAEF,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC;AAE1C,MAAM,CAAC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC;AAEvC,+CAA+C;AAC/C,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;IACpC,IAAI,GAAG,EAAE,CAAC;QACR,OAAO,CAAC,KAAK,CAAC,0CAA0C,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;IACzE,CAAC;SAAM,CAAC;QACN,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC;QAC7D,OAAO,EAAE,CAAC;IACZ,CAAC;AACH,CAAC,CAAC,CAAC;AAEH;;GAEG;AACH,MAAM,CAAC,KAAK,UAAU,YAAY,CAAC,KAAa,EAAE,SAAgB,EAAE;IAClE,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC;IACpC,IAAI,CAAC;QACH,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC3C,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAG,KAAe,CAAC,OAAO,CAAC,CAAC;QACjE,MAAM,KAAK,CAAC;IACd,CAAC;YAAS,CAAC;QACT,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;AACH,CAAC","sourcesContent":["import pkg from 'pg';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nconst { Pool } = pkg;\n\nconst dbConfig = {\n  host: process.env.DB_HOST || 'localhost',\n  port: Number(process.env.DB_PORT) || 5432,\n  database: process.env.DB_NAME || 'postgres',\n  user: process.env.DB_USER || 'postgres',\n  password: process.env.DB_PASSWORD || '',\n  ssl: {\n    require: true,\n    rejectUnauthorized: false,\n  },\n};\n\nconsole.log('Database Config:', dbConfig);\n\nexport const pool = new Pool(dbConfig);\n\n// Log connection success or failure on startup\npool.connect((err, client, release) => {\n  if (err) {\n    console.error('Error connecting to PostgreSQL database:', err.message);\n  } else {\n    console.log('Successfully connected to PostgreSQL database');\n    release();\n  }\n});\n\n/**\n * Reusable function to execute SQL queries against our database\n */\nexport async function executeQuery(query: string, params: any[] = []) {\n  const client = await pool.connect();\n  try {\n    return await client.query(query, params);\n  } catch (error) {\n    console.error('Database Query Error:', (error as Error).message);\n    throw error;\n  } finally {\n    client.release();\n  }\n}\n"]}